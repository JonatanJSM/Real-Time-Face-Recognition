<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Resultados por Grupo</title>
  <style>
    body {
      background: linear-gradient(to bottom, #6e2f74, #1a1a40);
      font-family: sans-serif;
      padding: 2rem;
    }

    #tabla {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 700px;
      margin: auto;
    }

    .grupo {
      display: flex;
      align-items: center;
      background-color: #fff;
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
      transition: transform 0.3s ease;
      height: 80px;
    }

    .numero {
      background: #8e44ad;
      color: white;
      padding: 1rem;
      font-size: 1.5rem;
      font-weight: bold;
      width: 60px;
      text-align: center;
    }

    .info {
      flex: 1;
      padding: 0.5rem 1rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .nombre {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 0.3rem;
    }

    .barra-container {
      background: #eee;
      border-radius: 10px;
      overflow: hidden;
      height: 20px;
    }

    .barra {
      height: 100%;
      background: orange;
      width: 0%;
    }

    .valor {
      font-size: 1rem;
      font-weight: bold;
      color: #333;
      margin-left: 10px;
      width: 80px;
      text-align: right;
    }

    .grupo-wrapper {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
    }
  </style>
</head>
<body>

<h1 style="text-align:center;color:white;">üèÜ Resultados por Ofrenda</h1>
<div id="tabla"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script>
const grupos = [
  { nombre: "Amigos 2", valor: 320 },
  { nombre: "Ciudadanos del reino", valor: 470 },
  { nombre: "Amigos 1", valor: 220 },
  { nombre: "Mensajeros", valor: 580 },
  { nombre: "Joyitas", valor: 340 },
  { nombre: "Grupo 1", valor: 150 },
  { nombre: "Grupo 2", valor: 390 },
];

const tabla = document.getElementById("tabla");

function renderTabla() {
  // Ordenar por valor descendente
  const ordenados = [...grupos].sort((a, b) => b.valor - a.valor);

  // Crear/actualizar elementos
  tabla.innerHTML = "";
  ordenados.forEach((grupo, index) => {
    const contenedor = document.createElement("div");
    contenedor.className = "grupo";

    const numero = document.createElement("div");
    numero.className = "numero";
    numero.innerText = index + 1;

    const info = document.createElement("div");
    info.className = "info";

    const nombre = document.createElement("div");
    nombre.className = "nombre";
    nombre.innerText = grupo.nombre;

    const barraContainer = document.createElement("div");
    barraContainer.className = "barra-container";

    const barra = document.createElement("div");
    barra.className = "barra";
    barra.style.background = obtenerColor(index);

    barraContainer.appendChild(barra);
    info.appendChild(nombre);
    info.appendChild(barraContainer);

    const wrapper = document.createElement("div");
    wrapper.className = "grupo-wrapper";
    wrapper.appendChild(info);

    const valor = document.createElement("div");
    valor.className = "valor";
    valor.innerText = "$0";

    wrapper.appendChild(valor);
    contenedor.appendChild(numero);
    contenedor.appendChild(wrapper);
    tabla.appendChild(contenedor);

    // Animaci√≥n barra
    gsap.to(barra, {
      width: (grupo.valor / 600) * 100 + "%",
      duration: 1.5,
      ease: "power2.out"
    });

    // Animaci√≥n n√∫mero
    gsap.to({ val: 0 }, {
      val: grupo.valor,
      duration: 1.5,
      ease: "power2.out",
      onUpdate: function () {
        valor.innerText = "$" + Math.floor(this.targets()[0].val);
      }
    });
  });
}

function obtenerColor(index) {
  const colores = ["#f1c40f", "#f39c12", "#e67e22", "#e74c3c", "#d35400", "#c0392b", "#b03a2e"];
  return colores[index] || "#999";
}

// Mostrar tabla inicial
renderTabla();

// Simular actualizaci√≥n de puntajes
setTimeout(() => {
  grupos[2].valor = 650; // Osos se van al primer lugar
  renderTabla();
}, 4000);
</script>

</body>
</html>
